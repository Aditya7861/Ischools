{% extends 'home.html' %}
{% load static %}
{% block extra-css %}
  <link rel="stylesheet" href="{% static 'timeline.css' %}">
{% endblock %}
{% block header %}
{% endblock %}
{% block navbar %}
  <nav class="navbar navbar-expand-sm bg-light navbar-light">
    <ul class="nav  nav-white" id="log">
      <li class="nav-item active px-0">
        <a class="nav-link" href="{% url 'loggedin' %}"><i class="fa fa-home" style="color:lightslategrey;font-size:30px"></i></a>
      </li>
      <li class="nav-item px-0">
        <a class="nav-link" href="#"><i class="fa fa-envelope-o" style="color:lightslategrey;font-size:30px"></i></a>
      </li>
      <li class="nav-item px-0">
        <a class="nav-link" href="{% url 'profile' %}"><i class="fa fa-user" style="color:lightslategrey;font-size:30px"></i></a>
      </li>
      <li class="nav-item px-0">
        <a class="nav-link" href="{% url 'friends' %}"><i class="fa fa-group" style="color:lightslategrey;font-size:30px"></i></a>
      </li>
      <li class="nav-item px-0">
        <a class="nav-link" href="{% url 'logout' %}"><i class="fa fa-sign-out" style="color:lightslategrey;font-size:30px"></i></a>
      </li>
    </ul>
  </nav>
{% endblock %}
{% block container %}
    <div class="container" style="background-color: #f8f9fa">
    <form method="post" action="/post/">
        {% csrf_token %}
       <div class="form-group">
         <label for="write your post"><h4 class="text-info">Write your post : </h4></label>
         {{ form.text }}
       </div>
     <button type="submit" class="btn btn-primary">Post</button>
    </form>
    <hr>
  {% for post in posts %}
    <div class="layout">
    <div class="user">
       <img style="border-radius: 50%;" src="{% static 'user-128.png' %}" width="50px" height="50px">
    </div>
    <div class="content">
       <p>by <strong><span style="color: blue;">{{ post.username }}</span> </strong> at <strong>{{ post.published_date }}</strong></p>
       <p>{{ post.text }}</p>

        <table class="tabl" width="100%">
           <tr>
               {% for like in post.likes_set.all %}
                    {% if like.post == post and like.user == request.user %}
                        <td><a href="#">unlike:({{ post.likes_set.count }})</a></td>
                    {% endif %}
                {% empty %}
                   <td><a href="{% url 'add_like' pk=post.pk %}">Like :({{ post.likes_set.count}})</a></td>
               {% endfor %}
               <td><a href="{% url 'post_details' pk=post.pk %}">Comments:({{post.comments_set.count}})</td>
           </tr>
       </table>
      </div>
    <hr>
  </div>
  {% endfor %}
     {% with posts as items %}
            {% if items.has_other_pages %}
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-left">
                        {% if items.has_previous %}
                            <li class="page-item"><a class="page-link" href="?page={{ items.previous_page_number }}">&laquo;</a></li>
                        {% else %}
                            <li class="page-item disabled"><a class="page-link" href="#"><span>&laquo;</span></a></li>
                        {% endif %}
                        {% for i in items.paginator.page_range %}
                            {% if items.number == i %}
                                <li class="page-item active"><a class="page-link" href="#">{{ i }} <span class="sr-only">(current)</span></a></li>
                            {% else %}
                                <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if items.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ items.next_page_number }}">&raquo;</a></li>
                        {% else %}
                            <li class="page-item disabled"><a class="page-link" href="#"><span>&raquo;</span></a></li>
                        {% endif %}
                    </ul>
                </nav>
            {% endif %}
        {% endwith %}
    </div>
{% endblock %}


